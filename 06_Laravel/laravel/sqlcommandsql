CREATE TABLE users (
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
username VARCHAR(64) NOT NULL,
password VARCHAR(64) NOT NULL,
hoten VARCHAR(128) NOT NULL,
email VARCHAR(128) ,
phonenumber INT(16) UNSIGNED,
avatar VARCHAR(512),
role VARCHAR(10) DEFAULT 'student',
is_deleted BOOLEAN DEFAULT false,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
/*username, password, hoten, email, phonenumber, avatar, role*/
CREATE TABLE message(
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
noidung TEXT NOT NULL,
idsend INT(6) UNSIGNED,
idrev INT(6) UNSIGNED,
is_deleted BOOLEAN DEFAULT false,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE assignment(
id INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
authorid INT(6) UNSIGNED,
name TEXT,
due DATETIME,
is_deleted BOOLEAN DEFAULT false,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE submission(
id INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
authorid INT(6) UNSIGNED,
assignmentid INT(10) UNSIGNED,
is_deleted BOOLEAN DEFAULT false,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE game(
id INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
authorid INT(6) UNSIGNED,
goiy TEXT NOT NULL,
is_deleted BOOLEAN DEFAULT false,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE fileattach(
id INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
part ENUM('assignment','submission','game'),
partid INT(10) UNSIGNED,
tenfile VARCHAR(64),
url VARCHAR(512),
is_deleted BOOLEAN DEFAULT false,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE password_resets(
    email VARCHAR(128) ,
    token VARCHAR(256) ,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
    
);

CREATE TABLE failed_jobs(
    id INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    uuid VARCHAR(64),
    connection TEXT,
    queue TEXT,
    payload TEXT,
    exception TEXT,
    failed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
    );
    
CREATE TABLE personal_access_tokens(
    id INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    tokenable TEXT,
    name TEXT,
    token VARCHAR(64),
    abilities TEXT,
    last_used_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
    );
